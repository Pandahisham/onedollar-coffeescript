(function(){"use strict";window.OneDollar=function(){function t(t,n,e,r){this.fragmentation=null!=t?t:64,this.size=null!=n?n:250,this.angle=null!=e?e:45,this.step=null!=r?r:3,this.PI=Math.PI,this.HALFDIAGONAL=.5*Math.sqrt(this.size*this.size+this.size*this.size),this.templates={}}var n,e;return e=function(){function t(t,n){this.x=null!=t?t:0,this.y=null!=n?n:0}return t.prototype.dist=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},t.prototype.add=function(n){return n instanceof t?(this.x+=n.x,this.y+=n.y):(this.x+=n,this.y+=n),this},t.prototype.div=function(n){return n instanceof t?(this.x/=n.x,this.y/=n.y):(this.x/=n,this.y/=n),this},t.prototype.mult=function(n){return n instanceof t?(this.x*=n.x,this.y*=n.y):(this.x*=n,this.y*=n),this},t}(),n=function(){function t(t,n){this.name=null!=t?t:"",this.percent=null!=n?n:0}return t}(),t.prototype.learn=function(t,n){return n.length>0&&(this.templates[t]=this._transform(n)),this},t.prototype.check=function(t){var n;if(t.length>0)return t=this._transform(t),n=this.__equality(t),t},t.prototype._transform=function(t){return t=this.__convertToVectors(t),t=this.__resample(t),t=this.__rotateToZero(t),t=this.__scaleToSquare(t),t=this.__translateToOrigin(t)},t.prototype.__convertToVectors=function(t){var n,r,i,o;for(r=[],i=0,o=t.length;o>i;i++)n=t[i],r.push(new e(n[0],n[1]));return r},t.prototype.__resample=function(t){var n,r,i,o,s,h,a,u,l,_,f;for(h=this.___distance(t)/(this.fragmentation-1),n=0,s=[];0!==t.length;)if(o=t.pop(),0===s.length)s.push(o);else{if(0===t.length){s.push(o);break}if(i=t[t.length-1],a=o.dist(i),n+a>=h){if(u=new e(o.x+(h-n)/a*(i.x-o.x),o.y+(h-n)/a*(i.y-o.y)),s.push(u),t.push(u),n=0,s.length===this.fragmentation-1){s.push(t[t.length-1]);break}}else n+=a}if(s.length!==this.fragmentation)for(i=s[s.length-1],r=l=_=s.length,f=this.fragmentation;f>=_?f>l:l>f;r=f>=_?++l:--l)s.push(i);return s},t.prototype.__rotateToZero=function(t){var n,e;return n=this.___centroid(t),e=Math.atan2(n.y-t[0].y,n.x-t[0].x),this.___rotate(t,-e,n)},t.prototype.__scaleToSquare=function(t){var n,r,i,o,s,h,a;for(n=r=-1/0,i=o=+1/0,h=0,a=t.length;a>h;h++)s=t[h],i=Math.min(s.x,i),n=Math.max(s.x,n),o=Math.min(s.y,o),r=Math.max(s.y,r);return this.___scale(t,new e(this.size/(n-i),this.size/(r-o)))},t.prototype.__translateToOrigin=function(t){var n;return n=this.___centroid(t),this.___translate(t,n.mult(-1))},t.prototype.__equality=function(t){var n,e,r,i,o,s;s=this.templates;for(n in s)for(r=s[n],i=0,o=r.length;o>i;i++)e=r[i],console.log(e);return t},t.prototype.___centroid=function(t){var n,r,i,o;for(n=new e,i=0,o=t.length;o>i;i++)r=t[i],n.add(r);return n.div(t.length),n},t.prototype.___distance=function(t){var n,e,r,i,o;for(n=0,r=null,i=0,o=t.length;o>i;i++)e=t[i],null!==r&&(n+=e.dist(r)),r=e;return n},t.prototype.___difference=function(t,n){var e,r,i,o,s;for(e=0,r=o=0,s=t.length;s>o;r=++o)i=t[r],e+=i.dist(n[r]);return e/t.length},t.prototype.___translate=function(t,n){var e,r,i;for(r=0,i=t.length;i>r;r++)e=t[r],e.add(n);return t},t.prototype.___scale=function(t,n){var e,r,i;for(r=0,i=t.length;i>r;r++)e=t[r],e.mult(n.x);return t},t.prototype.___rotate=function(t,n,r){var i,o,s,h,a,u,l,_;for(h=Math.sin(n),i=Math.cos(n),o=l=0,_=t.length;_>l;o=++l)s=t[o],a=(s.x-r.x)*i-(s.y-r.y)*h+r.x,u=(s.x-r.x)*h+(s.y-r.y)*i+r.y,t[o]=new e(a,u);return t},t.prototype.___radians=function(t){return t*Math.PI/180},t}()}).call(this);